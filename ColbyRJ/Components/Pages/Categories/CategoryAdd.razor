@page "/category/add"
@rendermode InteractiveServer

@layout AdminLayout

@inject ICategoryRepository categoryRepository
@inject NavigationManager navManager
@attribute [Authorize(Roles = "Admin")]

<PageTitle>Add Category</PageTitle>

<div class="row my-2">
    <div class="col"></div>
    <div class="col-3">
        <HeadingC Text="Add Category" />

        <div class="mt-3">
            <EditForm Model="Category" OnValidSubmit="AddCategory">
                <DataAnnotationsValidator />

                <div class="form-group py-2">
                    <label>Name</label>
                    <InputText @bind-Value="Category.Name" class="form-control"></InputText>
                    <ValidationMessage For="()=> Category.Name"></ValidationMessage>
                </div>

                <div class="form-group pt-3">
                    <button class="btnAdd">Add Category</button>
                    <a href="categories" class="btnReturn ms-3">Return</a>
                </div>
            </EditForm>
        </div>
    </div>
    <div class="col"></div>
</div>

@code {
    private CategoryAddDTO Category { get; set; } = new CategoryAddDTO();

    private async Task AddCategory()
    {
        await categoryRepository.Create(Category);
        navManager.NavigateTo("categories");
    }
}
