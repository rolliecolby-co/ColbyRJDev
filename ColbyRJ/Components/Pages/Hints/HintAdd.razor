@page "/hint/add"
@rendermode InteractiveServer

@layout AdminLayout

@inject IHttpContextAccessor httpContext
@inject IHintRepository hintRepository
@inject NavigationManager navManager
@attribute [Authorize(Roles = "Admin")]

<div class="row">
    <div class="col">
    </div>
    <div class="col-8">
        <HeadingC Text="Add Hint" />

        <EditForm Model="@Hint" OnValidSubmit="AddHint">
            <DataAnnotationsValidator />

            <div class="row mt-3">
                <div class="col-12">
                    <div class="form-group">
                        <label>Title</label>
                        <div>
                            <InputText @bind-Value="@Hint.Title" class="form-control" />
                            <ValidationMessage For="() => Hint.Title"></ValidationMessage>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row mt-2">
                <div class="col-4">
                    <div class="form-group">
                        <label>Key</label>
                        <InputSelect @bind-Value="@Hint.Key" class="form-select">
                            <option value="" selected>-- Select Hint Key --</option>
                            <option value="BL">Browse Left Col</option>
                            <option value="BR">Browse Right Col</option>
                            <option value="EL">Edit Left Col</option>
                            <option value="EC">Edit Center Col</option>
                            <option value="ER">Edit Right Col</option>
                            <option value="AL">Admin Left Col</option>
                            <option value="AC">Admin Center Col</option>
                            <option value="AR">Admin Right Col</option>
                        </InputSelect>
                        <ValidationMessage For="() => Hint.Key"></ValidationMessage>
                    </div>
                    <div class="form-group mt-2">
                        <label>Order By</label>
                        <div>
                            <InputNumber @bind-Value="@Hint.OrderBy" class="form-control" />
                            <ValidationMessage For="() => Hint.OrderBy"></ValidationMessage>
                        </div>
                    </div>
                    <div class="mt-3 text-center">
                        <button type="submit" class="btnAdd">
                            Add Hint
                        </button>
                        <a href="hints" class="btnReturn ms-3">Return</a>
                    </div>
                </div>
                <div class="col">
                    <div class="form-group">
                        <label>Value</label>
                        <RZHtmlEditorLteC @bind-HtmlValue="@Hint.Value" Height="520px" />
                        <ValidationMessage For="@(() => Hint.Value)" />
                    </div>
                </div>
            </div>
        </EditForm>
    </div>
    <div class="col">
    </div>
</div>

@code {
    HintDTO Hint = new HintDTO();

    private async Task AddHint()
    {
        var addResult = await hintRepository.Create(Hint);
        navManager.NavigateTo("hints");
    }

}
