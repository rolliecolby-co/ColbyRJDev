@page "/grandpa"
@rendermode InteractiveServer

@layout NullLayout

@inject IHintRepository hintRepository
@inject NavigationManager navManager

<PageTitle>Colby Family Memories</PageTitle>

<GrandpaC PageTitle="Colby Family Memories - Grandpa" Page="Memories">

    <div class="row mt-1">
        <div class="col-md-4">
            <div class="mt-2">
                <div class="browsePanel">
                    <div class="text-center mt-2">
                        <h4>Audio Welcome</h4>
                        <div>
                            <audio controls="controls"><source src="inc/welcome.mp3" /></audio>
                        </div>
                    </div>
                    @if (leftHints != null && leftHints.Count > 0)
                    {
                        int count = 1;
                        foreach (var item in leftHints)
                        {
                            if (count == 1)
                            {
                                <CollapsableC2 Title="@item.Title" Collapsed="false" ChildContent="@item.Value" />
                            }
                            else
                            {
                                <CollapsableC2 Title="@item.Title" Collapsed="true" ChildContent="@item.Value" />
                            }
                            count++;
                        }
                    }
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div>
                <img src="images/momdadfourcorners1975.png" class="img-fluid browsePhoto" />
            </div>

        </div>
        <div class="col-md-4">
            <div class="browsePanel">
                @if (rightHints != null && rightHints.Count > 0)
                {
                    int count = 1;
                    foreach (var item in rightHints)
                    {
                        if (count == 1)
                        {
                            <CollapsableC2 Title="@item.Title" Collapsed="false" ChildContent="@item.Value" />
                        }
                        else
                        {
                            <CollapsableC2 Title="@item.Title" Collapsed="true" ChildContent="@item.Value" />
                        }
                        count++;
                    }
                }
            </div>
        </div>
    </div>
</GrandpaC>

@code {
    private List<HintDTO> leftHints;
    private List<HintDTO> rightHints;

    protected override async Task OnInitializedAsync()
    {
        await LoadHints();
    }

    private async Task LoadHints()
    {
        var result = await hintRepository.GetHintsByKey("BL");
        leftHints = result.ToList();

        var result2 = await hintRepository.GetHintsByKey("BR");
        rightHints = result2.ToList();
    }    
}
