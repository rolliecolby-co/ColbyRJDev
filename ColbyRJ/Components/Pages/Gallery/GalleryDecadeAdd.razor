@page "/galleryDecade/add"

@layout AdminLayout

@inject IHttpContextAccessor httpContext
@inject IGalleryRepository galleryRepository
@inject NavigationManager navManager
@attribute [Authorize(Roles = "Admin")]

<div class="row">
    <div class="col-4">
        <HeadingC Text="Add Gallery Decade" />

        <EditForm Model="@Decade" OnValidSubmit="AddDecade">
            <DataAnnotationsValidator />

            <div class="row mt-3">
                <div class="col">
                    <div class="form-group">
                        <label>Decade</label>
                        <div>
                            <InputText @bind-Value="@Decade.Decade" class="form-control" />
                            <ValidationMessage For="() => Decade.Decade"></ValidationMessage>
                        </div>
                    </div>
                    <div class="mt-3 text-center">
                        <button type="submit" class="btnAdd">
                            Add Decade
                        </button>
                        <a href="galleryDecades" class="btnReturn ms-3">Return</a>
                    </div>
                </div>
            </div>
        </EditForm>
    </div>
</div>

@code {
    GalleryDecadeDTO Decade = new GalleryDecadeDTO();

    private async Task AddDecade()
    {
        var addResult = await galleryRepository.CreateDecade(Decade);
        navManager.NavigateTo("galleryDecades");
    }

}
